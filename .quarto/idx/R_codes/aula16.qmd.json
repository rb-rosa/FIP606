{"title":"aula16","markdown":{"yaml":{"title":"aula16","format":"html","editor":"visual","execute":{"freeze":"auto","cache":true,"warning":false}},"headingText":"Mapas no R","containsRefs":false,"markdown":"\n\n\n```{r}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(ggplot2)\n\nlibrary(remotes)\nremotes::install_github(\"emdelponte/r4pde\")\nlibrary(r4pde)\n\nlibrary(rnaturalearth)\nlibrary(rnaturalearthhires)\n```\n\n#Instalar pacote do github:\n\n```{r}\nremotes::install_github(\"ropensci/rnaturalearthhires\")\n```\n\n#Conjunto de dados: Para plotar o mapa do pais, usa-se a função ne_countries\n\n```{r}\nsbr <- RustSoybean\n\nBRA <- ne_countries(country = \"Brazil\", \n                    returnclass = \"sf\")\nggplot(BRA) +\ngeom_sf(fill = \"white\")\n```\n\n#Para plotar os estados:\n\n```{r}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nggplot(BRA) +\ngeom_sf(color = \"white\",\n          fill = \"darkgreen\") +\n  theme_void()\n```\n\n#Para selecionar um estado: Para\n\n```{r}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_sf(data = MG, color = \"black\",\n            fill = \"green\")\n```\n\n#Para inserir os pontos especificos dos dados (latitude e longitude) \n\nPara plotar os pontos, precisa-se das coordenadas de onde foram coletados os pontos. Ex.: pontos de coleta - precisa-se coletar as coordenadas para plotar em um mapa (no caso de ser só o municipio, pode pegar na internet as coordenadas).\n\n```{r}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr, aes(longitude, latitude), alpha = 0.5)\n```\n\n#Para separar a data em dia, mês e ano\n\n```{r}\nsbr2 <- sbr |>\n  separate(planting, into = \n             c(\"year\", \"month\", \"day\"), sep = \"-\", remove = FALSE)\n\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr2,\n             aes(longitude, latitude, color = year), alpha = 0.5)+\n  facet_wrap(~year)+\n  theme_void()\n```\n\n#Como inserir a rosa dos ventos e a escala no mapa\n\n```{r}\nlibrary(ggspatial)\nggplot(BRA) +\n  annotation_north_arrow(location = \"bl\")+\n  annotation_scale(location = \"br\")+\n  geom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr2,\n             aes(longitude, latitude, color = year, size = severity), alpha = 0.5)+\n  labs(color = \"Planting Year\")+\n  theme_minimal()+\n  theme(legend.position = \"right\")\n```\n\n#Malha de municipios \n\nPega o arquivo shape, que baixado dos municipios em um site do IBJE ou outro confiável. Usa o pacote rgdal e executa os eeguintes comandos:\n\n```{r}\nlibrary(rgdal)\nlibrary(sf)\nshapefile <- st_read(\"Aula16_BR_Municipios_2022/BR_Municipios_2022.shp\")\nggplot(BRA) +\n  geom_sf(data = shapefile)\n```\n\nPara MG: Precisa filtrar\n\n```{r}\nshapefile <- st_read(\"MG_Municipios_2022/MG_Municipios_2022.shp\")\nggplot(MG) +\n  geom_sf(data = shapefile)\n```\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":true,"freeze":"auto","echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"aula16.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.475","editor":"visual","theme":"cosmo","title":"aula16"},"extensions":{"book":{"multiFile":true}}}}}