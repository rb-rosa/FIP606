{
  "hash": "d78f59aa70a1b8f64ff8be4ba7dd7149",
  "result": {
    "markdown": "---\ntitle: \"aula16\"\nformat: html\neditor: visual\n\nexecute: \n  freeze: auto\n  cache: true\n  warning: false\n---\n\n\n## Mapas no R\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-1_7595c0384d60df4e4e3e126f9d17125f'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(ggplot2)\n\nlibrary(remotes)\nremotes::install_github(\"emdelponte/r4pde\")\nlibrary(r4pde)\n\nlibrary(rnaturalearth)\nlibrary(rnaturalearthhires)\n```\n:::\n\n\n#Instalar pacote do github:\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-2_cd7e5267c57f9c971b752f2d4bd87f13'}\n\n```{.r .cell-code}\nremotes::install_github(\"ropensci/rnaturalearthhires\")\n```\n:::\n\n\n#Conjunto de dados: Para plotar o mapa do pais, usa-se a função ne_countries\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-3_78b0bd196698a6cffc6a18b13f405085'}\n\n```{.r .cell-code}\nsbr <- RustSoybean\n\nBRA <- ne_countries(country = \"Brazil\", \n                    returnclass = \"sf\")\nggplot(BRA) +\ngeom_sf(fill = \"white\")\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n#Para plotar os estados:\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-4_525fe8d68de3975b8aa4107e6a0446b0'}\n\n```{.r .cell-code}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nggplot(BRA) +\ngeom_sf(color = \"white\",\n          fill = \"darkgreen\") +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n#Para selecionar um estado: Para\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-5_814d93df95763a3de6e2d8da1079795b'}\n\n```{.r .cell-code}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_sf(data = MG, color = \"black\",\n            fill = \"green\")\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n#Para inserir os pontos especificos dos dados (latitude e longitude) \n\nPara plotar os pontos, precisa-se das coordenadas de onde foram coletados os pontos. Ex.: pontos de coleta - precisa-se coletar as coordenadas para plotar em um mapa (no caso de ser só o municipio, pode pegar na internet as coordenadas).\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-6_fb397898900a14c2daa48b0e1a3a5653'}\n\n```{.r .cell-code}\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr, aes(longitude, latitude), alpha = 0.5)\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n#Para separar a data em dia, mês e ano\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-7_14ad5a1301f212b1db345a810bf175c1'}\n\n```{.r .cell-code}\nsbr2 <- sbr |>\n  separate(planting, into = \n             c(\"year\", \"month\", \"day\"), sep = \"-\", remove = FALSE)\n\nBRA <- ne_states(country = \"Brazil\", \n                    returnclass = \"sf\")\nMG <- BRA |> filter(name_en == \"Minas Gerais\")\nggplot(BRA) +\ngeom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr2,\n             aes(longitude, latitude, color = year), alpha = 0.5)+\n  facet_wrap(~year)+\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n#Como inserir a rosa dos ventos e a escala no mapa\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-8_377143e2043df8d3130e406ae8f57201'}\n\n```{.r .cell-code}\nlibrary(ggspatial)\nggplot(BRA) +\n  annotation_north_arrow(location = \"bl\")+\n  annotation_scale(location = \"br\")+\n  geom_sf(color = \"black\",\n          fill = \"white\") +\n  geom_point(data = sbr2,\n             aes(longitude, latitude, color = year, size = severity), alpha = 0.5)+\n  labs(color = \"Planting Year\")+\n  theme_minimal()+\n  theme(legend.position = \"right\")\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n#Malha de municipios \n\nPega o arquivo shape, que baixado dos municipios em um site do IBJE ou outro confiável. Usa o pacote rgdal e executa os eeguintes comandos:\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-9_0522a9b2006a4b705bce7da7796c2de3'}\n\n```{.r .cell-code}\nlibrary(rgdal)\nlibrary(sf)\nshapefile <- st_read(\"Aula16_BR_Municipios_2022/BR_Municipios_2022.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `BR_Municipios_2022' from data source \n  `C:\\Users\\rbarb\\OneDrive\\Área de Trabalho\\Mestrado UFV\\Disciplinas\\FIP 606 Análise e Visualização de Dados em Fitopatologia\\Aulas\\Aula 19 - Quarto website\\website\\R_codes\\Aula16_BR_Municipios_2022\\BR_Municipios_2022.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 5572 features and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: -73.99045 ymin: -33.75118 xmax: -28.84764 ymax: 5.271841\nGeodetic CRS:  SIRGAS 2000\n```\n:::\n\n```{.r .cell-code}\nggplot(BRA) +\n  geom_sf(data = shapefile)\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nPara MG: Precisa filtrar\n\n\n::: {.cell hash='aula16_cache/html/unnamed-chunk-10_6b4eb2d063895047b66375cea7dd87c3'}\n\n```{.r .cell-code}\nshapefile <- st_read(\"MG_Municipios_2022/MG_Municipios_2022.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nReading layer `MG_Municipios_2022' from data source \n  `C:\\Users\\rbarb\\OneDrive\\Área de Trabalho\\Mestrado UFV\\Disciplinas\\FIP 606 Análise e Visualização de Dados em Fitopatologia\\Aulas\\Aula 19 - Quarto website\\website\\R_codes\\MG_Municipios_2022\\MG_Municipios_2022.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 853 features and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: -51.04608 ymin: -22.92276 xmax: -39.85683 ymax: -14.23318\nGeodetic CRS:  SIRGAS 2000\n```\n:::\n\n```{.r .cell-code}\nggplot(MG) +\n  geom_sf(data = shapefile)\n```\n\n::: {.cell-output-display}\n![](aula16_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}