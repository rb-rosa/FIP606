{
  "hash": "48f26c35f7a6e67c14c6d6caeeea15bd",
  "result": {
    "markdown": "---\ntitle: \"\"\nformat: html\neditor: visual\n\nexecute: \n  freeze: auto\n  cache: true\n  warning: false\n---\n\n\n![](/images/ggplot2.png){width=\"81\"}\n\nAula 4\n\n## **Noções básicas de plotagem**\n\nTodos os gráficos ggplot2 começam com uma chamada para `ggplot()`, fornecendo dados padrão e mapeamentos estéticos, especificados por `aes()`. Em seguida, você adiciona camadas, escalas, coordenadas e facetas com `+`. Para salvar um gráfico em disco, use `ggsave()`.\n\n`ggplot()`\n\n:   Criar um novo ggplot\n\n`aes()`\n\n:   Construir mapeamentos estéticos\n\n`` `+`(<gg>) |> ``\n\n:   Adicionar componentes a um gráfico\n\n`ggsave()`\n\n:   Salve um ggplot (ou outro objeto de grade) com padrões sensatos\n\n`qplot()` `quickplot()`\n\n:   plotagem rápida\n\nPara mais informações sobre o pacote ggplo2, [clique aqui](https://ggplot2.tidyverse.org/reference/index.html).\n\n## Importar dados\n\n\n::: {.cell hash='aula4_cache/html/unnamed-chunk-1_08dcea617523537d2091277af8c3663c'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nmg <- read_csv(\"dados-diversos.csv\")\n\nmg |> \n  ggplot(aes(Irrigation, severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)\n```\n\n::: {.cell-output-display}\n![](aula4_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n## Gerando gráficos\n\n\n::: {.cell hash='aula4_cache/html/unnamed-chunk-2_3417ec7147c245ed1c820e7b59fe9542'}\n\n```{.r .cell-code}\nmg |> \n# filter(rep == 3) |> \n  ggplot(aes(day, severity, shape = Irrigation))+\n  geom_point(alpha = 0.5)+\n  geom_line()+\n  facet_wrap(~rep)\n```\n\n::: {.cell-output-display}\n![](aula4_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='aula4_cache/html/unnamed-chunk-3_c762d68acb7722cbd118daf3987dec90'}\n\n```{.r .cell-code}\nmg2 <- mg |> \n  select(day, rep, severity) |> \n  group_by(day) |> \n  summarize(sev =  mean(severity))\n\n  mg2 |> \n  ggplot(aes(day, sev*100))+\n  geom_point()+\n  geom_line()+\n  ylim(0,100)+\n    labs(x = \"Time (days)\", y = \"Severity (%)\")\n```\n\n::: {.cell-output-display}\n![](aula4_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#   Configurar o gráfico\n```\n:::\n\n::: {.cell hash='aula4_cache/html/unnamed-chunk-4_a23769130342c6aa3a3edb8bc3f6af67'}\n\n```{.r .cell-code}\nmg2 |> \n  ggplot(aes(day, sev*100))+\n  geom_line(color = \"darkorange\")+\n  geom_point(size = 3, \n             color = \"darkorange\")+\n  scale_x_continuous(breaks = c(0,7,14,21,28,35,42,49,56,63))+\n  scale_y_continuous(n.breaks = 5, \n                     limits = c(0,100))+\n    labs(x = \"Time (days)\", \n         y = \"Severity (%)\", \n         title = \"My first ggplot\", \n         subtitle = \"It is beatiful\", \n         caption = \"Source: FIP 606\")+\n#   Configurar o gráfico\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](aula4_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"figs/myfirstggplot.png\",\n       bg = \"white\",\n       width = 4,\n       height = 3)\n```\n:::\n\n\n## Gráfico de interação em plotly\n\n\n::: {.cell hash='aula4_cache/html/unnamed-chunk-5_9aa7469a1012b122b22a5018f24019e8'}\n\n```{.r .cell-code}\np <- mg2 |> \n  ggplot(aes(day, sev*100))+\n  geom_line(color = \"darkorange\")+\n  geom_point(size = 3, \n             color = \"darkorange\")+\n  scale_x_continuous(breaks = c(0,7,14,21,28,35,42,49,56,63))+\n  scale_y_continuous(n.breaks = 5, \n                     limits = c(0,100))+\n    labs(x = \"Time (days)\", \n         y = \"Severity (%)\", \n         title = \"My first ggplot\", \n         subtitle = \"It is beatiful\", \n         caption = \"Source: FIP 606\")+\n#   Configurar o gráfico\n  theme_light()\nggsave(\"figs/myfirstggplot.png\",\n       bg = \"white\",\n       width = 4,\n       height = 3)\n\n\np\n```\n\n::: {.cell-output-display}\n![](aula4_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nlibrary(plotly)\n  ggplotly(p)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-9faab96c19099bcd5f7e\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-9faab96c19099bcd5f7e\">{\"x\":{\"data\":[{\"x\":[0,7,14,21,28,35,42,49,56,63],\"y\":[1,3.83333333333333,10.5,11,15.5,18.3333333333333,33.8333333333333,37,41.6666666666667,44],\"text\":[\"day:  0<br />sev * 100:  1.000000\",\"day:  7<br />sev * 100:  3.833333\",\"day: 14<br />sev * 100: 10.500000\",\"day: 21<br />sev * 100: 11.000000\",\"day: 28<br />sev * 100: 15.500000\",\"day: 35<br />sev * 100: 18.333333\",\"day: 42<br />sev * 100: 33.833333\",\"day: 49<br />sev * 100: 37.000000\",\"day: 56<br />sev * 100: 41.666667\",\"day: 63<br />sev * 100: 44.000000\"],\"type\":\"scatter\",\"mode\":\"lines+markers\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(255,140,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(255,140,0,1)\",\"opacity\":1,\"size\":11.3385826771654,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(255,140,0,1)\"}},\"frame\":null}],\"layout\":{\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":43.1050228310502},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"My first ggplot\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-3.15,66.15],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"7\",\"14\",\"21\",\"28\",\"35\",\"42\",\"49\",\"56\",\"63\"],\"tickvals\":[-4.44089209850063e-16,7,14,21,28,35,42,49,56,63],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"7\",\"14\",\"21\",\"28\",\"35\",\"42\",\"49\",\"56\",\"63\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(179,179,179,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.33208800332088,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(222,222,222,1)\",\"gridwidth\":0.33208800332088,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Time (days)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,25,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(179,179,179,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.33208800332088,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(222,222,222,1)\",\"gridwidth\":0.33208800332088,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Severity (%)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":\"transparent\",\"line\":{\"color\":\"rgba(179,179,179,1)\",\"width\":0.66417600664176,\"linetype\":\"solid\"},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.88976377952756,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"310c5de0dcb\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"310c2c617bc8\":{\"x\":{},\"y\":{}}},\"cur_data\":\"310c5de0dcb\",\"visdat\":{\"310c5de0dcb\":[\"function (y) \",\"x\"],\"310c2c617bc8\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n\n```{.r .cell-code}\n#plotly sem usar ggplot\nplot_ly(mg2, x = ~day, y = ~sev, type = 'scatter', mode = 'dots')\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-8033a837bc8a387cb13e\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-8033a837bc8a387cb13e\">{\"x\":{\"visdat\":{\"310c298b340f\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"310c298b340f\",\"attrs\":{\"310c298b340f\":{\"x\":{},\"y\":{},\"mode\":\"dots\",\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"scatter\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"day\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":\"sev\"},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"data\":[{\"x\":[0,7,14,21,28,35,42,49,56,63],\"y\":[0.01,0.0383333333333333,0.105,0.11,0.155,0.183333333333333,0.338333333333333,0.37,0.416666666666667,0.44],\"mode\":\"dots\",\"type\":\"scatter\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"line\":{\"color\":\"rgba(31,119,180,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<script src=\"../site_libs/plotly-binding-4.10.2/plotly.js\"></script>\r\n<script src=\"../site_libs/typedarray-0.1/typedarray.min.js\"></script>\r\n<script src=\"../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<link href=\"../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n<link href=\"../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\r\n<script src=\"../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}